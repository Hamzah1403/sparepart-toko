<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Parts Shop</title>
    <link rel="stylesheet" href="keranjang.css">
    <link rel="stylesheet" href="bootstrap-5.3.8-dist/css/bootstrap.min.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>
<nav class="navbar navbar-expand-lg " style="background-color: #1E1E1E;">
    <div class="container-fluid navbar-dark">
        <img src="iconmotor.png" style="width: 40px; margin-right: 10px;" alt="">
        <a class="navbar-brand logo ms-auto" href="#">Auto Parts Shop</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto d-flex gap-3 text-center pt-lg-0 pt-4">
                <li class="nav-item">
                    <a class="nav-link" href="index.html">Beranda</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="produk.html">Produk</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="tentang.html">Tentang</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="kontak.html">Kontak</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="keranjang.html">
                        <img src="iconkeranjang.png" class="cart" style="width: 40px; " alt="">
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<body>
    <div class="kubus">
        <h1 class="text7">Keranjang Belanja</h1>
        <button class="pentagon"></button>
    </div>
    <div id="cart-container"></div>

<div class="cart-total">
  <h3>Total: <span id="total-price">Rp 0</span></h3>
  <button id="checkout-btn">Checkout</button>
</div>
    



    <footer class="container-fluid text-center" style="margin-top: 30px; background-color: #1E1E1E; color: white; padding: 30px;">
    <p>&copy; 2025 Auto Parts Shop. Semua hak dilindungi.</p>
    </footer>


    <script src="cart.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
        const cartContainer = document.getElementById("cart-container");
        const totalPriceElement = document.getElementById("total-price");

        function formatRupiah(angka) {
          return "Rp " + angka.toLocaleString("id-ID");
        }

        function renderCart() {
          const cart = getCart();
          cartContainer.innerHTML = "";

          if (cart.length === 0) {
            cartContainer.innerHTML = "<p>Keranjang kosong.</p>";
            totalPriceElement.textContent = "Rp 0";
            return;
          }

          let total = 0;

          cart.forEach((item, index) => {
            const subtotal = item.price * item.quantity;
            total += subtotal;

            const div = document.createElement("div");
            div.classList.add("cart-item");
            div.innerHTML = `
              <div class="item-info">
                <img src="${item.image}" alt="${item.name}" width="100">
                <div>
                  <h3>${item.name}</h3>
                  <p>${formatRupiah(item.price)}</p>
                  <p>Stok tersisa: ${item.stock}</p>
                </div>
              </div>
              <div class="item-controls">
                <button class="minus" data-index="${index}">-</button>
                <span>${item.quantity}</span>
                <button class="plus" data-index="${index}">+</button>
                <button class="delete" data-index="${index}">Hapus</button>
              </div>
            `;
            cartContainer.appendChild(div);
          });

          totalPriceElement.textContent = formatRupiah(total);
        }

        // Event: tambah/kurang/hapus
        cartContainer.addEventListener("click", function (e) {
          let cart = getCart();
          const index = e.target.dataset.index;

          if (e.target.classList.contains("plus")) {
            if (cart[index].quantity < cart[index].stock) {
              cart[index].quantity++;
            } else {
              alert("Stok habis!");
            }
          } else if (e.target.classList.contains("minus")) {
            if (cart[index].quantity > 1) {
              cart[index].quantity--;
            } else {
              cart.splice(index, 1);
            }
          } else if (e.target.classList.contains("delete")) {
            cart.splice(index, 1);
          }

          saveCart(cart);
          renderCart();
        });

        renderCart();
      });
    </script>
    <script type="module" src="./cart.js"></script>
</body>

</html>